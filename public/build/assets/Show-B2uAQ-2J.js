import{d as Z,j as ee,T as V,k as b,q as te,W as $,m as U,f as l,r as q,c as v,o as u,i as f,a as e,b as T,t as o,u as t,l as x,v as A,A as se,F as R,g as ae,e as W,w as C,h as k,n as Y,x as le,N as M}from"./app-TXcSdSht.js";import{_ as ne}from"./AdminLayout-CGy25mJj.js";import{_ as oe}from"./SpinnerBtn-CuVaIAvq.js";import"./AssetModal-mZh6fxZu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputFieldError-CJFZsvPb.js";import"./ToastrContainer-CicGnxfz.js";const ie={key:0,class:"alert alert-warning mb-3"},re={class:"mb-0"},ce={class:"mb-3 flex items-center justify-between gap-3"},ue={class:"flex-1"},de=["placeholder"],pe={class:"flex items-center gap-2"},ve={class:"label whitespace-nowrap"},ge={class:"table-responsive whitespace-nowrap rounded-primary"},he={class:"table"},me={class:"w-1"},fe={class:"flex w-8 items-center gap-2"},_e=["checked"],ye={key:0},be={class:"w-1/2"},xe={class:"w-1/2"},ke=["checked","onChange"],we=["title"],Se=["onUpdate:modelValue"],Ae={key:0},Ce={colspan:"3",class:"text-muted text-center"},Me={class:"mt-2 flex flex-wrap items-center justify-between gap-3"},Ne={class:"text-muted text-sm"},Pe={class:"flex items-center gap-2"},Te={class:"flex items-center gap-1"},Oe=["max","placeholder"],Ve={class:"mt-2 flex items-center gap-1"},$e={key:0,class:"ms-2 text-sm text-green-600"},Ue={class:"mb-2"},Ke={class:"text-muted d-block mt-1"},Je={class:"mb-2"},Be={class:"space-y-3"},Fe={key:0,class:"alert alert-success"},Ie={key:0,class:"text-warning"},je={key:1,class:"alert alert-warning"},Le={class:"alert alert-info"},qe={class:"text-muted small"},Re={class:"space-y-2"},We={class:"alert alert-danger flex flex-col items-start"},Ye={class:"block"},De={class:"mb-0"},ze={class:"text-muted small"},Ee=Z({layout:ne}),st=Object.assign(Ee,{__name:"Show",props:["posts","id","buttons","segments","fileModifiedAt","hasBackup","filters"],setup(d){var I,j;const O=ee(),n=d,g=V({key:"",value:"",id:n.id}),D=()=>{g.post("/admin/language/addkey",{onSuccess:()=>{g.reset(),O.close("createModal")}})},p=V({values:n.posts.data,fileModifiedAt:n.fileModifiedAt}),h=b(!1),N=b({});te(()=>{N.value=JSON.parse(JSON.stringify(n.posts.data))}),$(()=>p.values,()=>{h.value=JSON.stringify(p.values)!==JSON.stringify(N.value)},{deep:!0});const z=()=>{M.patch(route("admin.language.update",n.id),{values:p.values,fileModifiedAt:p.fileModifiedAt},{onSuccess:()=>{h.value=!1,N.value=JSON.parse(JSON.stringify(p.values)),p.fileModifiedAt=n.fileModifiedAt}})},_=V({search:((I=n.filters)==null?void 0:I.search)||"",perPage:((j=n.filters)==null?void 0:j.perPage)||15}),w=b(n.posts.current_page);$(()=>n.posts.current_page,a=>{w.value=a});const E=()=>{let a=parseInt(w.value);if(isNaN(a)||a<1?a=1:a>n.posts.last_page&&(a=n.posts.last_page),a===n.posts.current_page){w.value=a;return}M.get(n.posts.path,{...K(_.data()),page:a},{preserveState:!0,replace:!0})},K=a=>{const s={};for(const c in a)a[c]!==""&&a[c]!==null&&a[c]!==void 0&&(s[c]=a[c]);return s},P=(()=>{let a;return()=>{clearTimeout(a),a=setTimeout(()=>{M.get(route("admin.language.show",n.id),K(_.data()),{preserveState:!0,replace:!0})},300)}})(),r=b([]),J=b(!1),B=U({get(){const a=Object.keys(n.posts.data);return a.length>0&&a.every(s=>r.value.includes(s))},set(a){if(a){const s=Object.keys(n.posts.data);r.value=[...new Set([...r.value,...s])]}else{const s=Object.keys(n.posts.data);r.value=r.value.filter(c=>!s.includes(c))}}}),G=a=>{const s=r.value.indexOf(a);s>-1?r.value.splice(s,1):r.value.push(a)},y=U(()=>r.value.length),H=()=>{O.close("aiConfirmModal"),J.value=!0;const a=r.value.length>0?{keys:r.value.slice(0,100)}:{};M.patch(route("admin.language.ai.update",n.id),a,{onFinish:()=>{J.value=!1,r.value=[]}})},F=b(!1),Q=()=>{O.close("revertModal"),F.value=!0,M.patch(route("admin.language.ai.revert",n.id),{},{onFinish:()=>{F.value=!1,h.value=!1}})};$(()=>n.posts.data,a=>{p.values=a,h.value||(N.value=JSON.parse(JSON.stringify(a)))},{deep:!0});const X=U(()=>{const a=n.posts.from||0,s=n.posts.to||0,c=n.posts.total||0,S=n.posts.current_page||0,i=n.posts.last_page||0;return`${l("Showing")} ${a} ${l("to")} ${s} ${l("of")} ${c} ${l("entries")} (${l("Page")} ${S} ${l("of")} ${i})`});return(a,s)=>{const c=q("Link"),S=q("Modal");return u(),v(R,null,[h.value?(u(),v("div",ie,[e("strong",null,o(t(l)("Unsaved Changes")),1),e("p",re,o(t(l)("You have unsaved changes. Don't forget to click 'Save Changes' below.")),1)])):f("",!0),e("div",ce,[e("div",ue,[x(e("input",{type:"search","onUpdate:modelValue":s[0]||(s[0]=i=>t(_).search=i),onInput:s[1]||(s[1]=(...i)=>t(P)&&t(P)(...i)),placeholder:t(l)("Search by key or value..."),class:"input max-w-72"},null,40,de),[[A,t(_).search]])]),e("div",pe,[e("label",ve,o(t(l)("Per Page")),1),x(e("select",{"onUpdate:modelValue":s[2]||(s[2]=i=>t(_).perPage=i),onChange:s[3]||(s[3]=(...i)=>t(P)&&t(P)(...i)),class:"select w-24"},s[8]||(s[8]=[e("option",{value:15},"15",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)]),544),[[se,t(_).perPage]])])]),e("form",{onSubmit:le(z,["prevent"]),method:"post"},[e("div",ge,[e("table",he,[e("thead",null,[e("tr",null,[e("th",me,[e("div",fe,[e("input",{type:"checkbox",checked:B.value,onChange:s[4]||(s[4]=i=>B.value=i.target.checked),class:"checkbox"},null,40,_e),y.value>0?(u(),v("span",ye,"("+o(y.value)+")",1)):f("",!0)])]),e("th",be,o(t(l)("Translation Key")),1),e("th",xe,o(t(l)("Translated Value")),1)])]),e("tbody",null,[(u(!0),v(R,null,ae(d.posts.data,(i,m)=>(u(),v("tr",{key:m},[e("td",null,[e("input",{type:"checkbox",checked:r.value.includes(m),onChange:L=>G(m),class:"checkbox"},null,40,ke)]),e("td",{title:m,class:"whitespace-break-spaces"},o(m),9,we),e("td",null,[x(e("input",{type:"text",class:"input","onUpdate:modelValue":L=>t(p).values[m]=L},null,8,Se),[[A,t(p).values[m]]])])]))),128)),Object.keys(d.posts.data).length===0?(u(),v("tr",Ae,[e("td",Ce,o(t(l)("No results found.")),1)])):f("",!0)])])]),e("div",Me,[e("div",Ne,o(X.value),1),e("div",Pe,[e("div",Te,[x(e("input",{type:"number",min:"1",max:d.posts.last_page,"onUpdate:modelValue":s[5]||(s[5]=i=>w.value=i),class:"input",style:{width:"80px"},placeholder:t(l)("Page...")},null,8,Oe),[[A,w.value,void 0,{number:!0}]]),e("button",{type:"button",class:"btn btn-secondary",onClick:E},o(t(l)("Go")),1)]),d.posts.prev_page_url?(u(),W(c,{key:0,href:d.posts.prev_page_url,class:Y(["btn btn-secondary",{disabled:!d.posts.prev_page_url}])},{default:C(()=>[k(o(t(l)("Previous")),1)]),_:1},8,["href","class"])):f("",!0),d.posts.next_page_url?(u(),W(c,{key:1,href:d.posts.next_page_url,class:Y(["btn btn-secondary",{disabled:!d.posts.next_page_url}])},{default:C(()=>[k(o(t(l)("Next")),1)]),_:1},8,["href","class"])):f("",!0)])]),e("div",Ve,[T(oe,{"btn-text":t(l)("Save Changes"),processing:t(p).processing,disabled:!h.value},null,8,["btn-text","processing","disabled"]),h.value?f("",!0):(u(),v("span",$e,o(t(l)("All changes saved")),1))])],32),T(S,{state:"createModal","header-state":!0,"header-title":t(l)("Add New Key"),"action-btn-text":t(l)("Create"),"action-btn-state":!0,"action-processing":t(g).processing,onAction:D},{default:C(()=>[e("div",Ue,[e("label",null,o(t(l)("Key")),1),x(e("input",{type:"text",name:"key","onUpdate:modelValue":s[6]||(s[6]=i=>t(g).key=i),class:"input",required:""},null,512),[[A,t(g).key]]),e("small",Ke,o(t(l)("Use letters, numbers, underscores, hyphens, dots, and spaces only.")),1)]),e("div",Je,[e("label",null,o(t(l)("Value")),1),x(e("input",{type:"text",name:"value","onUpdate:modelValue":s[7]||(s[7]=i=>t(g).value=i),class:"input",required:""},null,512),[[A,t(g).value]])])]),_:1},8,["header-title","action-btn-text","action-processing"]),T(S,{state:"aiConfirmModal","header-state":!0,"header-title":t(l)("Confirm AI Translation"),"action-btn-text":t(l)("Translate"),"action-btn-state":!0,onAction:H},{default:C(()=>[e("div",Be,[y.value>0?(u(),v("div",Fe,[s[9]||(s[9]=k(" You have selected ",-1)),e("strong",null,o(y.value),1),k(" "+o(y.value===1?"key":"keys")+" for translation. ",1),y.value>100?(u(),v("span",Ie," Only the first 100 keys will be translated. ")):f("",!0)])):(u(),v("div",je,s[10]||(s[10]=[k(" No keys selected. Please select up to ",-1),e("strong",null,"100 keys",-1),k(" to translate. ",-1)]))),e("p",null,o(t(l)("This will automatically translate the selected entries using AI.")),1),e("div",Le,o(t(l)("A backup will be created automatically. You can revert the changes if needed.")),1),e("p",qe,o(t(l)("This process may take a few moments depending on the number of keys.")),1)])]),_:1},8,["header-title","action-btn-text"]),T(S,{state:"revertModal","header-state":!0,"header-title":t(l)("Revert to Backup"),"action-btn-text":t(l)("Revert"),"action-btn-state":!0,onAction:Q},{default:C(()=>[e("div",Re,[e("div",We,[e("strong",Ye,o(t(l)("Warning")),1),e("p",De,o(t(l)("This will restore the previous version before AI translation. All current changes will be lost.")),1)]),e("p",ze,o(t(l)("Are you sure you want to continue?")),1)])]),_:1},8,["header-title","action-btn-text"])],64)}}});export{st as default};
