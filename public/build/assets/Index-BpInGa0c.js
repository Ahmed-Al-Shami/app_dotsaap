import{d as V,j as Y,s as D,T as N,r as h,y as E,c as r,o as n,a as t,b as i,e as I,t as l,u as e,f as a,F as m,g as w,l as c,h as $,n as B,w as b,v,A as P}from"./app-TXcSdSht.js";import{_ as z}from"./AdminLayout-CGy25mJj.js";import{_ as F}from"./Paginate-DL6Rurto.js";import{h as g}from"./moment-BAtM24Ew.js";import{_ as L}from"./NoDataFound-CX4SY3HL.js";import{_ as T}from"./FilterDropdown-D-eRfdwX.js";import"./AssetModal-mZh6fxZu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputFieldError-CJFZsvPb.js";import"./ToastrContainer-CicGnxfz.js";import"./SpinnerBtn-CuVaIAvq.js";const j={class:"mt-4 space-y-4"},O={class:"table-responsive whitespace-nowrap rounded-primary"},R={class:"table"},W={class:"text-end"},q={key:0},G={class:"text-left"},H={class:"flex gap-2"},J={class:"mr-1 inline w-12 rounded-full",alt:"preview"},K=["href"],Q={class:"font-bold"},X={key:0,class:"badge badge-primary"},Z={class:"text-left"},tt={class:""},et={class:"dropdown","data-placement":"bottom-start"},st={class:"dropdown-toggle"},lt={class:"dropdown-content w-32"},at={class:"dropdown-list"},ot={class:"dropdown-list-item"},nt={class:"dropdown-list-item"},it={class:"dropdown-list-item"},dt=["onClick"],rt={class:"mb-2"},ct={class:"mb-2"},ut={class:"mb-2"},_t={class:"label mb-2"},pt={value:""},mt=["value"],ht={class:"mb-2"},bt=V({layout:z}),Vt=Object.assign(bt,{__name:"Index",props:["users","plans"],setup(u){const k=Y(),{deleteRow:x,formatCurrency:y,uiAvatar:M}=D(),o=N({user_id:null,name:"",email:"",plan_id:"",will_expire:"",assign_plan:!0}),A=()=>{o.put(route("admin.users.assign.plan",o.user_id),{onSuccess:()=>{o.reset(),k.close("editUserModal")}})},U=[{label:"Name",value:"name"},{label:"Email",value:"email"},{label:"Status",value:"status",options:[{label:"Active",value:1},{label:"Inactive",value:0}]}];return(_,d)=>{const p=h("Icon"),f=h("Link"),C=h("Modal"),S=E("lazy");return n(),r(m,null,[t("div",j,[i(T,{options:U}),t("div",O,[t("table",R,[t("thead",null,[t("tr",null,[t("th",null,l(e(a)("User")),1),t("th",null,l(e(a)("Plan")),1),t("th",null,l(e(a)("Expire At")),1),t("th",null,l(e(a)("Status")),1),t("th",null,l(e(a)("Date")),1),t("th",null,[t("div",W,l(e(a)("Action")),1)])])]),u.users.total?(n(),r("tbody",q,[(n(!0),r(m,null,w(u.users.data,s=>(n(),r("tr",{key:s.id},[t("td",G,[t("div",H,[c(t("img",J,null,512),[[S,e(M)(s.name,s.avatar)]]),t("a",{href:_.route("admin.users.show",s.id)},[t("p",Q,l(s.name),1),t("p",null,l(s.email),1)],8,K)])]),t("td",null,[s.plan?(n(),r("span",X,l(s.plan.title),1)):(n(),r(m,{key:1},[$(" N/A ")],64))]),t("td",null,l(s.will_expire?e(g)(s.will_expire).format("D MMM, YYYY"):e(a)("N/A")),1),t("td",Z,[t("span",{class:B(["badge",s.status==1?"badge-success":"badge-danger"])},l(s.status==1?e(a)("Active"):e(a)("Inactive")),3)]),t("td",null,l(e(g)(s.created_at).format("D MMM, YYYY")),1),t("td",tt,[t("div",et,[t("div",st,[i(p,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),t("div",lt,[t("ul",at,[t("li",ot,[i(f,{href:_.route("admin.users.show",s),class:"dropdown-link"},{default:b(()=>[i(p,{icon:"bx:show"}),t("span",null,l(e(a)("View")),1)]),_:2},1032,["href"])]),t("li",nt,[i(f,{href:_.route("admin.users.edit",s),class:"dropdown-link"},{default:b(()=>[i(p,{icon:"bx:edit"}),t("span",null,l(e(a)("Edit")),1)]),_:2},1032,["href"])]),t("li",it,[t("button",{as:"button",class:"dropdown-link",onClick:vt=>e(x)(_.route("admin.users.destroy",s.id))},[i(p,{class:"h-6",icon:"bx:trash"}),t("span",null,l(e(a)("Delete")),1)],8,dt)])])])])])]))),128))])):(n(),I(L,{key:1,"for-table":"true"}))]),i(F,{links:u.users.links},null,8,["links"])])]),i(C,{state:"editUserModal","header-state":!0,"header-title":e(a)("Assign Plan"),"action-btn-text":e(a)("Update"),"action-btn-state":!0,"action-processing":e(o).processing,onAction:A},{default:b(()=>[t("div",rt,[t("label",null,l(e(a)("Name")),1),c(t("input",{type:"text",class:"input",disabled:"","onUpdate:modelValue":d[0]||(d[0]=s=>e(o).name=s)},null,512),[[v,e(o).name]])]),t("div",ct,[t("label",null,l(e(a)("Email")),1),c(t("input",{type:"email",class:"input",disabled:"","onUpdate:modelValue":d[1]||(d[1]=s=>e(o).email=s)},null,512),[[v,e(o).email]])]),t("div",ut,[t("label",_t,l(e(a)("Plan")),1),c(t("select",{"onUpdate:modelValue":d[2]||(d[2]=s=>e(o).plan_id=s),class:"select"},[t("option",pt,l(e(a)("Select Plan")),1),(n(!0),r(m,null,w(u.plans,s=>(n(),r("option",{value:s.id,key:s.id},l(s.title)+" "+l(e(y)(s.price)),9,mt))),128))],512),[[P,e(o).plan_id]])]),t("div",ht,[t("label",null,l(e(a)("Will Expire")),1),c(t("input",{type:"date",class:"input","onUpdate:modelValue":d[3]||(d[3]=s=>e(o).will_expire=s)},null,512),[[v,e(o).will_expire]])])]),_:1},8,["header-title","action-btn-text","action-processing"])],64)}}});export{Vt as default};
