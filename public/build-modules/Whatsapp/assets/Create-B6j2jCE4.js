import{T as C,m as R,c as d,o as n,d as l,b as p,h as t,f as V,g as S,t as u,j as M,n as $,F as T,i as w,e as L,l as U}from"./app-BYM_31EU.js";import{_ as v}from"./SelectField-CEUUVeny.js";import{_ as j}from"./SpinnerBtn-AUjirXqh.js";import{_ as B}from"./UserLayout-Br6IHeZb.js";import"./ValidationErrors-MJY6JPWK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-Bkk7kk5A.js";import"./AssetModal-CWaGrucV.js";import"./assetStore-CRTuDG_T.js";const E={class:"card card-body mx-auto space-y-3 py-6 sm:max-w-2xl"},F={class:"label mb-1"},A={key:0,class:"my-1 text-[11px] font-light text-danger-600"},N={class:"flex items-center gap-3"},O={class:"flex items-center gap-2"},P=["onClick"],D={class:"flex w-full justify-end"},z={__name:"Form",props:{module:{type:String,required:!0},platformLevel:{type:String,default:"Platform"},platforms:{type:Array,required:[]},shortCodes:{type:Array,default:[]},quickReply:{type:Object,default:{}}},setup(r){var c;const s=r,i=!!((c=s.quickReply)!=null&&c.id),e=C({module:s.module,platform_id:"",message_template:"",status:"active",_method:"POST"});R(()=>{i&&s.quickReply&&(e.platform_id=s.quickReply.platform_id,e.message_template=s.quickReply.message_template,e.status=s.quickReply.status,e._method="PUT")});const x=()=>{e.post(route(`user.${s.module.toLowerCase()}.quick-replies.${i?"update":"store"}`,{id:i?s.quickReply.id:null}))},k=[{name:"Active",id:"active"},{name:"Inactive",id:"inactive"}],h=m=>{e.message_template=`${e.message_template} ${m}`};return(m,a)=>{var f,_,y,g,b;return n(),d("form",{onSubmit:L(x,["prevent"])},[l("div",E,[p(v,{label:r.platformLevel,modelValue:t(e).platform_id,"onUpdate:modelValue":a[0]||(a[0]=o=>t(e).platform_id=o),validationMessage:(f=t(e).errors)==null?void 0:f.platform_id,options:r.platforms},null,8,["label","modelValue","validationMessage","options"]),l("div",null,[l("label",F,u(m.trans("Message Template")),1),V(l("textarea",{"onUpdate:modelValue":a[1]||(a[1]=o=>t(e).message_template=o),id:"body-text-id",class:$([{"border border-danger-600":(_=t(e).errors)==null?void 0:_.text},"textarea"])},null,2),[[M,t(e).message_template]]),(y=t(e).errors)!=null&&y.text?(n(),d("div",A,u((g=t(e).errors)==null?void 0:g.text),1)):S("",!0)]),l("div",N,[a[3]||(a[3]=l("p",null,"Variables:",-1)),l("div",O,[(n(!0),d(T,null,w(r.shortCodes,(o,q)=>(n(),d("button",{key:q,type:"button",class:"btn-outline-primary rounded px-1",onClick:I=>h(o)},u(o),9,P))),128))])]),p(v,{label:"Select Status",modelValue:t(e).status,"onUpdate:modelValue":a[2]||(a[2]=o=>t(e).status=o),placeholder:"SELECT",validationMessage:(b=t(e).errors)==null?void 0:b.status,options:k},null,8,["modelValue","validationMessage"]),l("div",D,[p(j,{type:"submit",processing:t(e).processing,"btn-text":m.trans(i?"Update":"Create")},null,8,["processing","btn-text"])])])],32)}}},ee=Object.assign({layout:B},{__name:"Create",props:["platforms","quickReply"],setup(r){return(s,i)=>(n(),U(z,{module:"whatsapp",platforms:r.platforms,shortCodes:["{name}","{phone}"],quickReply:r.quickReply},null,8,["platforms","quickReply"]))}});export{ee as default};
