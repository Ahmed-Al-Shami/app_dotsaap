import{s as W,r as v,a as $,c as h,o as u,d as e,n as f,g as y,l as T,F as j,k as o,t as l,f as _,C as x,b,h as d,e as z,Q as O,J as B}from"./app-BYM_31EU.js";import{_ as Q}from"./UserLayout-Br6IHeZb.js";import{_ as Y}from"./SpinnerBtn-AUjirXqh.js";import{_ as g}from"./InputField-DK89fRTX.js";import"./ValidationErrors-MJY6JPWK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-Bkk7kk5A.js";import"./AssetModal-CWaGrucV.js";import"./assetStore-CRTuDG_T.js";const G={class:"card mx-auto max-w-2xl p-10"},J={class:"mx-auto flex max-w-md items-center"},L={class:"z-10 -mr-0.5 flex flex-col items-center gap-y-1"},q={class:"z-10 -mx-0.5 flex flex-col items-center gap-y-1"},H={class:"z-10 -ml-0.5 flex flex-col items-center gap-y-1"},K={class:"mx-auto mt-1 flex max-w-md items-center justify-between text-sm"},R={class:"flex translate-x-[-22px] flex-col items-center gap-y-1"},X={class:"flex translate-x-[-22px] flex-col items-center gap-y-1"},Z={class:"flex translate-x-[4px] flex-col items-center gap-y-1"},ee={class:"mt-8 flex flex-col gap-4"},ae={class:"text-[12px] font-normal"},se={class:"my-2"},te={target:"_blank",href:"https://developers.facebook.com/apps",class:"cursor-pointer text-primary-600 hover:text-primary-900"},le={class:"mt-8 flex flex-col gap-4"},oe={class:"text-[12px] font-normal"},ne={class:"text-bold my-2"},re={target:"_blank",id:"goto_webhook_setting",class:"cursor-pointer text-primary-600 hover:text-primary-900"},ie={class:"w-full cursor-pointer"},ue={for:"",class:"label mb-1"},de=["value"],ce={class:"w-full cursor-pointer"},pe={for:"",class:"label mb-1"},me=["value"],ve={key:0,class:"mt-8 flex w-full justify-between"},fe=["disabled"],Me=Object.assign({layout:Q},{__name:"Create",props:["platforms","totalCounter"],setup(be){const{copyToClipboard:w}=W(),n=v({name:null,phone_number_id:null,business_account_id:null,access_token:null}),t=v(1),i=v(null);var c=v(null);const k=v(!1),F=()=>{k.value=!0,O.post(route("user.whatsapp.platforms.store"),n.value).then(a=>{var s;c=a.data.platform,t.value=3,B.success(((s=a.data)==null?void 0:s.message)??"Device created successfully")}).catch(a=>{var s,p;a.response.status==422&&(i.value=a.response.data.errors,(s=i.value)!=null&&s.name&&(t.value=1)),a.response.status==500&&B.danger(((p=a.response.data)==null?void 0:p.message)??"Server Error")}).finally(()=>{k.value=!1})};function P(){t.value<2&&t.value++}function U(){t.value>1&&t.value--}return(a,s)=>{var C,V,M,S,D,A,I,E,N;const p=$("Icon");return u(),h("div",G,[e("div",null,[e("ul",J,[e("li",L,[e("span",{class:f(["flex h-7 w-7 items-center justify-center rounded-full",t.value==1||t.value>1?"bg-primary-500 text-white":"border border-gray-500"])},[t.value==1?(u(),h(j,{key:0},[o(" 1 ")],64)):y("",!0),t.value>1?(u(),T(p,{key:1,icon:"bx:check"})):y("",!0)],2)]),e("hr",{class:f(["h-2 w-48 border-0",t.value>1?"bg-primary-500":"bg-dark-400 dark:bg-dark-700"])},null,2),e("li",q,[e("span",{class:f(["flex h-7 w-7 shrink-0 items-center justify-center rounded-full",t.value==2||t.value>1?"bg-primary-500 text-white":"border border-gray-500"])},[t.value>2?(u(),T(p,{key:0,icon:"bx:check"})):(u(),h(j,{key:1},[o(" 2 ")],64))],2)]),e("hr",{class:f(["h-2 w-48 border-0",t.value>2?"bg-primary-500":"bg-dark-400 dark:bg-dark-700"])},null,2),e("li",H,[e("span",{class:f(["flex h-7 w-7 shrink-0 items-center justify-center rounded-full",t.value==3||t.value>2?"bg-primary-500 text-white":"border border-gray-500"])}," 3 ",2)])]),e("ul",K,[e("li",R,l(a.trans("Device Name")),1),e("li",X,l(a.trans("Information")),1),e("li",Z,l(a.trans("Verify")),1)])]),e("form",{class:"step-form",onSubmit:z(F,["prevent"])},[_(b(g,{class:"mt-8",label:"Title",modelValue:n.value.name,"onUpdate:modelValue":s[0]||(s[0]=r=>n.value.name=r),placeholder:"Enter device name",validationMessage:(C=i.value)==null?void 0:C.name},null,8,["modelValue","validationMessage"]),[[x,t.value===1]]),_(e("div",ee,[e("div",ae,[e("span",null,[o(l(a.trans("At first you need to create an app in Meta Developer in you Facebook account."))+" ",1),e("ul",se,[e("li",null,[o(l(a.trans("1. Create a Developer account and a new Facebook app as described here"))+" (",1),e("a",te,l(a.trans("Click")),1),s[6]||(s[6]=o(") ",-1))]),e("li",null,l(a.trans(`2. Once you have your Facebook app created, in the dashboard of the app, locate the
                Whatsapp product Setup.`)),1),e("li",null,[o(l(a.trans("3. Then go to WhatsApp Api Setup (Quickstart > API Setup) and you will find"))+" (",1),e("strong",null,l(a.trans("access token")),1),s[7]||(s[7]=o(") (",-1)),e("strong",null,l(a.trans("Phone number ID")),1),s[8]||(s[8]=o(") (",-1)),e("strong",null,l(a.trans("WhatsApp Business Account ID")),1),s[9]||(s[9]=o(") ",-1))])])])]),b(g,{label:"Enter Your Access Token",modelValue:n.value.access_token,"onUpdate:modelValue":s[1]||(s[1]=r=>n.value.access_token=r),placeholder:"Enter access token",validationMessage:(M=(V=i.value)==null?void 0:V.access_token)==null?void 0:M[0]},null,8,["modelValue","validationMessage"]),b(g,{label:"Phone Number Id",modelValue:n.value.phone_number_id,"onUpdate:modelValue":s[2]||(s[2]=r=>n.value.phone_number_id=r),placeholder:"Enter phone number id",validationMessage:(D=(S=i.value)==null?void 0:S.phone_number_id)==null?void 0:D[0]},null,8,["modelValue","validationMessage"]),b(g,{label:"Business Account Id",modelValue:n.value.business_account_id,"onUpdate:modelValue":s[3]||(s[3]=r=>n.value.business_account_id=r),placeholder:"Enter business id",validationMessage:(I=(A=i.value)==null?void 0:A.business_account_id)==null?void 0:I[0]},null,8,["modelValue","validationMessage"])],512),[[x,t.value===2]]),_(e("div",le,[e("div",oe,[e("span",null,[o(l(a.trans(`Congratulation. Webhook is successfully created. You need to add this webhook url into
            your app configuration webhook settings.`))+" ",1),e("ul",ne,[e("li",null,[o(l(a.trans("1. Go Meta Developer where you already created an app"))+" (",1),e("a",re,l(a.trans("Click")),1),s[10]||(s[10]=o(") ",-1))]),e("li",null,l(a.trans("2. In the Dashboard you need to add a Product webhooks.")),1),e("li",null,l(a.trans("3. Then go to WhatsApp"))+" > "+l(a.trans("Configuration and enter the following info")),1)])])]),e("div",ie,[e("label",ue,l(a.trans("Callback Url")),1),e("input",{onClick:s[4]||(s[4]=r=>{var m;return d(w)(((m=d(c))==null?void 0:m.webhook_url)||"url")}),id:"callback-url",class:"input w-full cursor-pointer !text-gray-800 dark:!text-white",disabled:"",value:(E=d(c))==null?void 0:E.webhook_url},null,8,de)]),e("div",ce,[e("label",pe,l(a.trans("Verify Token")),1),e("input",{onClick:s[5]||(s[5]=r=>{var m;return d(w)(((m=d(c))==null?void 0:m.uuid)||"token")}),id:"token",class:"input w-full cursor-pointer !text-gray-800 dark:!text-white",disabled:"",value:(N=d(c))==null?void 0:N.uuid},null,8,me)])],512),[[x,t.value===3]]),t.value!==3?(u(),h("div",ve,[e("button",{type:"button",disabled:t.value===1,onClick:U,class:"btn btn-secondary"},l(a.trans("Previous")),9,fe),b(Y,{onClick:P,type:t.value>1?"submit":"button",processing:k.value,"btn-text":t.value>1?"Save":"Next"},null,8,["type","processing","btn-text"])])):y("",!0)],32)])}}});export{Me as default};
