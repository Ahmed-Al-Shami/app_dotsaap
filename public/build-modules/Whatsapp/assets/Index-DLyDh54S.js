import{u as k,_ as M,a as T,b as S,c as C,d as x}from"./NoConversation.vue_vue_type_script_setup_true_lang-BzOthi6t.js";import{_ as q}from"./UserLayout-Br6IHeZb.js";import{r as B,p as V,l,o,w,d as s,f as A,c as d,t as m,F as $,i as I,h as u,v as N,g as p,_ as P,m as D,b as c}from"./app-BYM_31EU.js";import{_ as F}from"./SpinnerBtn-AUjirXqh.js";import{_ as L}from"./CreateForm-ml_UMOrA.js";import R from"./InteractiveMessage-DI_EbudE.js";import U from"./FormIndex-CX-Ilrza.js";import j from"./PreviewIndex-BOqCrzG8.js";import"./AssetModal-CWaGrucV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./assetStore-CRTuDG_T.js";import"./dynamic-import-helper-BheWnx7M.js";import"./moment-BAtM24Ew.js";import"./DotLoader-DEyxUd3d.js";import"./MultiSelect-DLW6ou6k.js";import"./NoDataFound-BMo6R2xy.js";import"./echoServiceComposable-Bzp0fI07.js";import"./ValidationErrors-MJY6JPWK.js";import"./ToastrContainer-Bkk7kk5A.js";import"./AssetInput-D_06EOMO.js";import"./InputField-DK89fRTX.js";import"./ShortCodes-BabPkVzJ.js";const z={class:"h-[calc(100vh-5rem)] space-y-2 overflow-y-auto"},E={class:"mt-3 p-1"},O={class:"grid grid-cols-1 place-items-start gap-4 lg:grid-cols-3"},W={class:"col-span-full w-full lg:col-span-2"},G={class:"group mb-5 flex items-center rounded-lg dark:bg-slate-700"},H={value:""},J=["value"],K={class:"styled-scrollbar h-[calc(100vh-10rem)] overflow-y-auto"},Q={class:"col-span-full w-full rounded-md bg-slate-200 p-2 dark:bg-dark-800 lg:col-span-1"},X={class:"my-4"},Y={class:"card-body whatsapp-chat-body"},Z={class:"card-footer"},ee={__name:"TemplateModal",setup(_){const e=k(),t=B(""),a=V(()=>e.chatTemplates.find(n=>n.id===t.value)),i=()=>{e.inputMessage.type="template",e.inputMessage.template=a.value,e.submitMessage()};return(n,f)=>(o(),l(P,{"header-state":!0,"header-title":"Message Template",state:"templateModal","state-key":"templateModal",modalSize:"w-full h-full"},{default:w(()=>{var v,g,h,y,b;return[s("div",z,[s("div",E,[s("div",O,[s("div",W,[s("div",G,[A(s("select",{"onUpdate:modelValue":f[0]||(f[0]=r=>t.value=r),class:"select w-full"},[s("option",H,m(n.trans("Choose Template")),1),(o(!0),d($,null,I(u(e).getActiveModuleTemplates,r=>(o(),d("option",{key:r.id,value:r.id},m(r.name),9,J))),128))],512),[[N,t.value]])]),s("div",K,[((v=a.value)==null?void 0:v.type)=="interactive"?(o(),l(L,{key:0,meta:a.value.meta,preview:!1},null,8,["meta"])):(g=a.value)!=null&&g.type?(o(),l(U,{key:1,type:a.value.type,body:a.value.meta},null,8,["type","body"])):p("",!0)])]),s("div",Q,[s("p",X,m(n.trans("Preview")),1),s("div",Y,[((h=a.value)==null?void 0:h.type)=="interactive"?(o(),l(R,{key:0,components:a.value.meta},null,8,["components"])):(y=a.value)!=null&&y.type?(o(),l(j,{key:1,message:{type:a.value.type,body:a.value.meta}},null,8,["message"])):p("",!0)]),s("div",Z,[(b=a.value)!=null&&b.id?(o(),l(F,{key:0,onClick:i,type:"button",processing:u(e).loading.sendingMessage,class:"btn btn-primary float-right mt-2","btn-text":"Send"},null,8,["processing"])):p("",!0)])])])])])]}),_:1}))}},$e=Object.assign({layout:[q,M]},{__name:"Index",props:["id","conversations","chat_templates","quick_replies","ai_templates","badges","platform","languages","module_features"],setup(_){const e=_,t=k();return D(()=>{var i;t.features=e.module_features,t.activeConversationId=null;const a=new URLSearchParams(window.location.search);a.get("customer_name")||a.get("q"),t.conversations=e.conversations||[],e.id&&t.setActiveConversation(e.id),e.platform&&(t.platform=e.platform),t.chatTemplates=e.chat_templates||[],t.quickReplies=e.quick_replies||[],t.aiTemplates=e.ai_templates||[],t.badges=e.badges||[],t.languages=e.languages||[],(i=e.platform)!=null&&i.owner_id&&t.connectWebSocket(`live-chat.whatsapp.${e.platform.owner_id}`)}),(a,i)=>u(t).hasActiveConversation?(o(),d($,{key:0},[c(T),c(S),c(C,null,{"dynamic-template-modal":w(()=>[c(ee)]),_:1})],64)):(o(),l(x,{key:1}))}});export{$e as default};
