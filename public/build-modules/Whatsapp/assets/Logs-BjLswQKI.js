import{m as B}from"./vue3-apexcharts-C-C0RsIj.js";import{_ as S}from"./Paginate-Cpv8cjFG.js";import{_ as D}from"./NoDataFound-BMo6R2xy.js";import{_ as N}from"./UserLayout-Br6IHeZb.js";import{p as k,c as l,o as a,d as e,l as F,t as i,F as $,i as w,n as d,g as O,b as P,h as z,B as L}from"./app-BYM_31EU.js";import"./ValidationErrors-MJY6JPWK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ToastrContainer-Bkk7kk5A.js";import"./AssetModal-CWaGrucV.js";import"./assetStore-CRTuDG_T.js";const R={class:"grid grid-cols-1 gap-y-4 md:gap-4 lg:grid-cols-3"},V={class:"table-responsive col-span-2 w-full rounded-2xl"},j={class:"table"},A={class:"!text-right"},E={key:0,class:"tbody"},M=["href"],T=["title"],W=["title"],q=["title"],G={class:"text-end"},H=["title"],I={class:"w-full"},J={class:"col-span-full space-y-4 lg:col-span-1"},K={class:"card card-body flex h-56 flex-col items-center justify-center rounded-2xl"},Q={class:"card card-body rounded-2xl"},U={class:"mt-4 space-y-3"},X={class:"mb-1 text-sm"},Y={class:"h-1.5 w-full rounded-lg bg-gray-200"},ce=Object.assign({layout:N},{__name:"Logs",props:["logs","campaign"],setup(r){const t=r,{failed_messages:m,delivered_messages:_,sent_messages:u,read_messages:g}=t.campaign,h=["#F44336","#4CAF50","#2196F3","#FF9800"],p=k(()=>({series:[m,_,u,g],chartOptions:{plotOptions:{pie:{donut:{size:"75%"}}},chart:{type:"donut"},colors:h,height:160,labels:[`Failed ${m}`,`Delivered ${_}`,`Sent ${u}`,`Read ${g}`],responsive:[{breakpoint:480,options:{chart:{width:150},legend:{position:"bottom"}}}]}})),C=k(()=>{const n=t.campaign.total_messages,o=s=>s?s/n*100:0;return[{name:"Failed",value:t.campaign.failed_messages,percentage:o(t.campaign.failed_messages)},{name:"Delivered",value:t.campaign.delivered_messages,percentage:o(t.campaign.delivered_messages)},{name:"Sent",value:t.campaign.sent_messages,percentage:o(t.campaign.sent_messages)},{name:"Read",value:t.campaign.read_messages,percentage:o(t.campaign.read_messages)}]});return(n,o)=>(a(),l("div",R,[e("div",V,[e("table",j,[e("thead",null,[e("tr",null,[e("th",null,i(n.trans("Phone Number")),1),e("th",null,i(n.trans("Sent")),1),e("th",null,i(n.trans("Delivered")),1),e("th",A,i(n.trans("Read")),1)])]),r.logs.data.length?(a(),l("tbody",E,[(a(!0),l($,null,w(r.logs.data,(s,c)=>{var f,b,v,x,y;return a(),l("tr",{key:c},[e("td",null,[e("a",{href:`https://wa.me/${(f=s.meta)==null?void 0:f.phone}`,target:"_blank",rel:"noopener noreferrer",class:"hover:underline"},i((b=s.meta)==null?void 0:b.phone),9,M)]),e("td",null,[s.failed_at?(a(),l("i",{key:0,class:d(["bx",s.failed_at?"bxs-info-circle text-red-500":"bx-info-circle"]),title:((y=(x=(v=s.meta.errors)==null?void 0:v[0])==null?void 0:x.error_data)==null?void 0:y.details)??s.failed_at},null,10,T)):(a(),l("i",{key:1,class:d(["bx",s.send_at?"bxs-check-circle text-green-500":"bx-circle"]),title:s.send_at},null,10,W))]),e("td",null,[e("i",{class:d(["bx",s.delivered_at?"bxs-check-circle text-green-500":"bx-circle"]),title:s.delivered_at},null,10,q)]),e("td",null,[e("div",G,[e("i",{class:d(["bx",s.read_at?"bxs-check-circle text-green-500":"bx-circle"]),title:s.read_at},null,10,H)])])])}),128))])):(a(),F(D,{key:1,forTable:!0}))]),e("div",I,[r.logs.data.length?(a(),F(S,{key:0,links:r.logs.links},null,8,["links"])):O("",!0)])]),e("div",J,[e("div",K,[P(z(B),{height:"200",options:p.value.chartOptions,series:p.value.series},null,8,["options","series"])]),e("div",Q,[e("h6",null,i(n.trans("Logs")),1),e("div",U,[(a(!0),l($,null,w(C.value,(s,c)=>(a(),l("div",{key:c},[e("p",X,i(s.name),1),e("div",Y,[e("div",{class:"h-full rounded-lg transition-all",style:L({width:s.percentage+"%",backgroundColor:h[c]})},null,4)])]))),128))])])])]))}});export{ce as default};
