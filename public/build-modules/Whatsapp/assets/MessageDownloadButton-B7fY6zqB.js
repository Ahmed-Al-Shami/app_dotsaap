import{D as g}from"./DotLoader-DEyxUd3d.js";import{r as h,s as p,p as c,a as b,c as n,o as t,Z as _,g as k,d as y,l,J as f}from"./app-BYM_31EU.js";const v={class:"relative min-h-2"},w={key:1,class:"border min-h-28 rounded border-zinc-600 aspect-square w-full bg-slate-200 dark:bg-slate-700 flex justify-center items-center"},x={key:0,src:"/assets/images/image-placeholder.jpg",alt:""},D={__name:"MessageDownloadButton",props:["message","attachment_key","attachment_id","loader"],setup(s){const e=s,o=h(!1),{data_get:r}=p(),d=()=>{o.value=!0,axios.post(route("user.messages.download-attachments"),{message_uuid:e.message.uuid,attachment_id:e.attachment_id,attachment_key:e.attachment_key}).then(a=>{console.log(a.data),e.message.body=a.data.body}).catch(a=>{console.error(a),f.danger(a.response.data.message??"Failed to download attachment")}).finally(()=>{o.value=!1})},i=c(()=>r(e.message.body,e.attachment_key,null)!==null),m=c(()=>e.message.direction==="out");return(a,B)=>{const u=b("Icon");return t(),n("div",v,[!s.loader||m.value||i.value?_(a.$slots,"default",{key:0}):(t(),n("div",w,[s.message.type==="image"?(t(),n("img",x)):k("",!0),y("div",{onClick:d,class:"absolute group backdrop-blur-[1px] inset-0 cursor-pointer bg-black/20 hover:bg-black/30 transition-colors flex justify-center items-center"},[o.value?(t(),l(g,{key:0})):(t(),l(u,{key:1,icon:"carbon:download",class:"text-2xl bg-black/40 shadow text-white size-8 rounded-full p-2"}))])]))])}}};export{D as _};
