import{T as M,l as S,r as E,c as d,o as p,a as r,b as l,d as R,i as w,f as h,u as t,n as T,t as c}from"./app-BPxwetsb.js";import{_ as C}from"./SpinnerBtn-CfgwDcW3.js";import{_ as U}from"./MultiSelect-i-Xpur08.js";import{_ as i}from"./SelectField-B2nCC0hZ.js";import{_ as $}from"./ShortCodes-D3suqKQL.js";import{_ as L}from"./TextareaField-JhZNkJuR.js";import{_ as B}from"./UserLayout-CXO-83Mq.js";import D from"./TemplatePreview-AHGk3drd.js";import"./multiselect-B77LSZRy.js";import"./sharedComposable-TMw4c8uc.js";import"./toastComposable-BZSSJ7BC.js";import"./Modal-BIKyjMag.js";import"./modalStore-CB1x_O57.js";import"./IntersectionObserver-D-rwMhVF.js";import"./AssetModal-Dh0jwXcc.js";import"./assetStore-W3D4A6Yl.js";const N={class:"p-4 sm:p-6"},j={class:"mt-4 grid grid-cols-1 place-items-start gap-4 md:grid-cols-12"},H={class:"card card-body md:col-span-9"},P={class:"grid grid-cols-2 gap-2"},z={key:1,class:"col-span-3"},F={class:"mt-2 flex items-end justify-between"},K={class:"w-full md:col-span-3"},O={class:"whatsapp-chat-body relative h-[35rem] rounded-xl border-2 border-dark-400 outline outline-4 outline-dark-500 dark:border-dark-800 dark:outline-dark-950"},q={class:"absolute bottom-3 left-4 w-10/12 rounded-lg bg-white p-1 px-2 dark:bg-dark-700 xl:w-8/12"},A={key:1},G={class:"rounded-lg bg-gray-100 p-2 text-[11px] leading-4 dark:bg-dark-800"},I={class:"text-end text-[10px] text-gray-400"},J={key:2},ne=Object.assign({layout:B},{__name:"Create",props:["platforms","sort_codes","templates","autoReply"],setup(n){const o=n,u=!!o.autoReply,e=M({platform_id:"",keywords:[],message_type:"text",match_type:"",template_id:"",meta:{},message_template:"",status:"active",_method:"post"});u&&(e.platform_id=o.autoReply.platform_id,e.keywords=o.autoReply.keywords||[],e.message_type=o.autoReply.message_type,e.match_type=o.autoReply.match_type,e.template_id=o.autoReply.template_id,e.meta=o.autoReply.meta,e.message_template=o.autoReply.message_template,e.status=o.autoReply.status,e._method="put");const V=()=>{e.post(u?route("user.whatsapp-web.auto-replies.update",o.autoReply):route("user.whatsapp-web.auto-replies.store"),{preserveScroll:!0,onSuccess:()=>e.reset()})},_=S(()=>o.templates.find(m=>m.id==e.template_id));return(m,a)=>{var g,y,f,v,b,k;const x=E("PageHeader");return p(),d("main",N,[r(x),l("div",j,[l("div",H,[l("form",{onSubmit:R(V,["prevent"])},[l("div",P,[r(i,{label:"Device",modelValue:t(e).platform_id,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).platform_id=s),placeholder:"SELECT",validationMessage:(g=t(e).errors)==null?void 0:g.platform_id,options:n.platforms},null,8,["modelValue","validationMessage","options"]),r(i,{label:"Message Type",modelValue:t(e).message_type,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).message_type=s),placeholder:"SELECT",validationMessage:(y=t(e).errors)==null?void 0:y.message_type,options:["text","template"]},null,8,["modelValue","validationMessage"]),t(e).message_type==="template"?(p(),w(i,{key:0,class:"col-span-1",label:"Select a Template",modelValue:t(e).template_id,"onUpdate:modelValue":a[2]||(a[2]=s=>t(e).template_id=s),placeholder:"SELECT",validationMessage:(f=t(e).errors)==null?void 0:f.template_id,options:n.templates},null,8,["modelValue","validationMessage","options"])):h("",!0),r(U,{class:T(t(e).message_type==="text"?"col-span-full":"col-span-1"),label:"Keywords",modelValue:t(e).keywords,"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).keywords=s),placeholder:"enter keywords",validationMessage:(v=t(e).errors)==null?void 0:v.keywords,options:t(e).keywords},null,8,["class","modelValue","validationMessage","options"]),t(e).message_type==="text"?(p(),d("div",z,[r(L,{label:"Message",placeholder:"Enter the message template",modelValue:t(e).message_template,"onUpdate:modelValue":a[4]||(a[4]=s=>t(e).message_template=s),validationMessage:(b=t(e).errors)==null?void 0:b.message_template,attrs:{rows:5}},null,8,["modelValue","validationMessage"]),r($,{modelValue:t(e).message_template,"onUpdate:modelValue":a[5]||(a[5]=s=>t(e).message_template=s)},null,8,["modelValue"])])):h("",!0)]),l("div",F,[r(i,{class:"max-w-xs",label:"Status",modelValue:t(e).status,"onUpdate:modelValue":a[6]||(a[6]=s=>t(e).status=s),placeholder:"SELECT",validationMessage:(k=t(e).errors)==null?void 0:k.status,options:["active","inactive"]},null,8,["modelValue","validationMessage"]),r(C,{processing:t(e).processing,"btn-text":u?"Update":"Create"},null,8,["processing","btn-text"])])],32)]),l("div",K,[l("div",O,[l("div",q,[t(e).message_type=="template"&&_.value?(p(),w(D,{key:0,template:_.value},null,8,["template"])):t(e).message_type=="text"&&!_.value?(p(),d("div",A,[l("p",G,c(t(e).message_template||m.trans("The message will appear here")),1),l("p",I,c(new Date().toLocaleTimeString()),1)])):(p(),d("p",J,c(m.trans("The message will appear here")),1))])])])])])}}});export{ne as default};
