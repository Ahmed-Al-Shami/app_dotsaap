import{T as q,m as R,c as d,o as m,b as r,a as p,u as t,e as V,f as S,t as u,h as M,n as $,F as T,g as w,d as L,i as U}from"./app-BPxwetsb.js";import{_ as v}from"./SelectField-B2nCC0hZ.js";import{_ as B}from"./SpinnerBtn-CfgwDcW3.js";import{_ as E}from"./UserLayout-CXO-83Mq.js";import"./sharedComposable-TMw4c8uc.js";import"./toastComposable-BZSSJ7BC.js";import"./Modal-BIKyjMag.js";import"./modalStore-CB1x_O57.js";import"./IntersectionObserver-D-rwMhVF.js";import"./AssetModal-Dh0jwXcc.js";import"./assetStore-W3D4A6Yl.js";const F={class:"card card-body mx-auto space-y-3 py-6 sm:max-w-2xl"},j={class:"label mb-1"},A={key:0,class:"my-1 text-[11px] font-light text-danger-600"},N={class:"flex items-center gap-3"},O={class:"flex items-center gap-2"},P=["onClick"],D={class:"flex w-full justify-end"},z={__name:"Form",props:{module:{type:String,required:!0},platformLevel:{type:String,default:"Platform"},platforms:{type:Array,required:[]},shortCodes:{type:Array,default:[]},quickReply:{type:Object,default:{}}},setup(a){var c;const s=a,i=!!((c=s.quickReply)!=null&&c.id),e=q({module:s.module,platform_id:"",message_template:"",status:"active",_method:"POST"});R(()=>{i&&s.quickReply&&(e.platform_id=s.quickReply.platform_id,e.message_template=s.quickReply.message_template,e.status=s.quickReply.status,e._method="PUT")});const x=()=>{e.post(route(`user.${s.module.toLowerCase()}.quick-replies.${i?"update":"store"}`,{id:i?s.quickReply.id:null}))},k=[{name:"Active",id:"active"},{name:"Inactive",id:"inactive"}],h=n=>{e.message_template=`${e.message_template} ${n}`};return(n,o)=>{var f,y,_,g,b;return m(),d("form",{onSubmit:L(x,["prevent"])},[r("div",F,[p(v,{label:a.platformLevel,modelValue:t(e).platform_id,"onUpdate:modelValue":o[0]||(o[0]=l=>t(e).platform_id=l),validationMessage:(f=t(e).errors)==null?void 0:f.platform_id,options:a.platforms},null,8,["label","modelValue","validationMessage","options"]),r("div",null,[r("label",j,u(n.trans("Message Template")),1),V(r("textarea",{"onUpdate:modelValue":o[1]||(o[1]=l=>t(e).message_template=l),id:"body-text-id",class:$([{"border border-danger-600":(y=t(e).errors)==null?void 0:y.text},"textarea"])},null,2),[[M,t(e).message_template]]),(_=t(e).errors)!=null&&_.text?(m(),d("div",A,u((g=t(e).errors)==null?void 0:g.text),1)):S("",!0)]),r("div",N,[o[3]||(o[3]=r("p",null,"Variables:",-1)),r("div",O,[(m(!0),d(T,null,w(a.shortCodes,(l,C)=>(m(),d("button",{key:C,type:"button",class:"btn-outline-primary rounded px-1",onClick:I=>h(l)},u(l),9,P))),128))])]),p(v,{label:"Select Status",modelValue:t(e).status,"onUpdate:modelValue":o[2]||(o[2]=l=>t(e).status=l),placeholder:"SELECT",validationMessage:(b=t(e).errors)==null?void 0:b.status,options:k},null,8,["modelValue","validationMessage"]),r("div",D,[p(B,{type:"submit",processing:t(e).processing,"btn-text":n.trans(i?"Update":"Create")},null,8,["processing","btn-text"])])])],32)}}},se=Object.assign({layout:E},{__name:"Create",props:["platforms","shortCodes","quickReply"],setup(a){return(s,i)=>(m(),U(z,{module:"whatsapp-web",platforms:a.platforms,shortCodes:a.shortCodes,quickReply:a.quickReply},null,8,["platforms","shortCodes","quickReply"]))}});export{se as default};
